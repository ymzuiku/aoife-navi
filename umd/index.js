!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("querystring-number"),require("template-fn")):"function"==typeof define&&define.amd?define(["exports","querystring-number","template-fn"],e):e((n=n||self).Route={},n.qs,n.templateFn)}(this,function(n,f,r){"use strict";function o(i,o,l,s){return new(l=l||Promise)(function(n,e){function t(n){try{r(s.next(n))}catch(n){e(n)}}function a(n){try{r(s.throw(n))}catch(n){e(n)}}function r(e){e.done?n(e.value):new l(function(n){n(e.value)}).then(t,a)}r((s=s.apply(i,o||[])).next())})}function p(t,a){var r,i,o,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},n={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function e(e){return function(n){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,i&&(o=2&e[0]?i.return:e[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,e[1])).done)return o;switch(i=0,(e=o?[2&e[0],o.value]:e)[0]){case 0:case 1:o=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,i=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(o=0<(o=l.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){l.label=e[1];break}if(6===e[0]&&l.label<o[1]){l.label=o[1],o=e;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(e);break}o[2]&&l.ops.pop(),l.trys.pop();continue}e=a.call(t,l)}catch(n){e=[6,n],i=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,n])}}}f=f&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;var i={};var e,t,d="navi-page";function v(u){var t=this,c=document.createElement("div");c.setAttribute("ux-navi-root","1"),c.className="navi-root",c.push=function(l,s,n){return o(t,void 0,void 0,function(){var a,r,i,o;return p(this,function(n){switch(n.label){case 0:return(i=u[l])?(a=i()).then?[4,Promise.resolve(a)]:[3,2]:[2];case 1:if(!(r=n.sent()).default)return[2];a=r.default(),n.label=2;case 2:return i=v.isWechat?"replaceState":"pushState",r=s?l+"?"+f.stringify(s):l,history[i](s,"",r),i=c.lastElementChild,(o=document.createElement("div")).setAttribute("ux-navi","1"),o.__navi_pathname=r,o.__navi_state=s,o.append(a),i?(e=o,t=function(){c.append(o)},i.className=d+" navi-move-last",e.className=d+" navi-move-next",t(),setTimeout(function(){e.className=d},20)):(o.className=d,c.append(o)),[2]}var e,t})})},c.replace=function(r,i){return o(t,void 0,void 0,function(){var e,t,a;return p(this,function(n){switch(n.label){case 0:return(t=u[r])?(e=t()).then?[4,Promise.resolve(e)]:[3,2]:[2];case 1:if(!(a=n.sent()).default)return[2];e=a.default(),n.label=2;case 2:return history.replaceState(i,"",i?r+"?"+f.stringify(i):r),t=c.lastElementChild,(a=document.createElement("div")).setAttribute("ux-navi","1"),a.append(e),a.className=d,t.replaceWith(a),[2]}})})},c.pop=function(a){return void 0===a&&(a=1),o(t,void 0,void 0,function(){var e,t;return p(this,function(n){if(1<a)for(e=0;e<a-1;e++)1<c.children.length-1&&(t=c.children.item(c.children.length-1))&&t.remove();return 1<c.children.length&&r(),[2]})})},c.go=function(e){return void 0===e&&(e=0),o(t,void 0,void 0,function(){return p(this,function(n){return c.pop(c.children.length-1-e),[2]})})};var r=function(){var n,e;document.contains(c)?c.children.length<=1||(e=c.lastChild,n=c.children.item(c.children.length-2),e=e,n.className=d,e.className=d+" navi-move-next",e.remove(),c.lastChild.__navi_pathname&&history.replaceState(c.lastChild.__navi_state,"",c.lastChild.__navi_pathname)):window.removeEventListener("popstate",r)},n=location.pathname;return c.push("/",void 0,!0),"/"!==n&&c.push(n,void 0,!0),c}!function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t,a=r.apply(void 0,n);i[a]||(i[a]=!0,(t=document.createElement("style")).innerHTML=a,document.head.append(t))}((e=["\n  :root {\n    --navi-ease: cubic-bezier(0.23, 1, 0.32, 1);\n  }\n  .navi-root {\n    width: 100%;\n    height: 100%;\n    padding: 0px;\n    margin: 0px;\n    position: relative;\n    overflow: hidden;\n    background: var(--bg, #fff);\n  }\n  .navi-page {\n    display: block;\n    position: absolute;\n    background: var(--bg, #fff);\n    width: 100%;\n    height: 100%;\n    padding: 0px;\n    margin: 0px;\n    overflow: auto;\n    top: 0px;\n    left: 0px;\n    transform: translateY(0%);\n    transition: 0.42s transform var(--navi-ease);\n  }\n  .navi-move-last {\n    transform: translateY(-20%);\n  }\n  .navi-move-next {\n    transform: translateY(40%);\n  }\n"],t=["\n  :root {\n    --navi-ease: cubic-bezier(0.23, 1, 0.32, 1);\n  }\n  .navi-root {\n    width: 100%;\n    height: 100%;\n    padding: 0px;\n    margin: 0px;\n    position: relative;\n    overflow: hidden;\n    background: var(--bg, #fff);\n  }\n  .navi-page {\n    display: block;\n    position: absolute;\n    background: var(--bg, #fff);\n    width: 100%;\n    height: 100%;\n    padding: 0px;\n    margin: 0px;\n    overflow: auto;\n    top: 0px;\n    left: 0px;\n    transform: translateY(0%);\n    transition: 0.42s transform var(--navi-ease);\n  }\n  .navi-move-last {\n    transform: translateY(-20%);\n  }\n  .navi-move-next {\n    transform: translateY(40%);\n  }\n"],Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e)),v.isIos=/(?:iPhone|iPad)/.test(navigator.userAgent),v.isWechat=/MicroMessenger/.test(navigator.userAgent),n.Navi=v,Object.defineProperty(n,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
